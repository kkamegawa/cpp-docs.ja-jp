---
title: Visual Studio で C++ メイクファイル プロジェクトを作成する
ms.date: 08/05/2019
f1_keywords:
- vc.appwiz.makefile.project
helpviewer_keywords:
- Makefile projects [C++]
ms.assetid: dd077af3-97a8-48fb-baaa-cf7e07ddef61
ms.openlocfilehash: 861cd88440a697ce5a3abc83109526227ae42f8e
ms.sourcegitcommit: bd7ddc044f9083246614b602ef6a758775313214
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/09/2019
ms.locfileid: "68866130"
---
# <a name="create-a-c-makefile-project"></a>C++ メイクファイル プロジェクトを作成する

*makefile* は、一連の C++ ソース コード ファイルをコンパイルし、リンクする (あるいは*ビルド*する) 方法を含むテキスト ファイルです。 *make* プログラムによってメイクファイルが読み取られ、コンパイラ、リンカー、そしておそらくは他のプログラムが呼び出され、実行可能ファイルが作成されます。 Microsoft の *make* プログラム実装は [NMAKE](nmake-reference.md) と呼ばれています。

既存のメイクファイル プロジェクトがある場合、Visual Studio IDE でそれをコード化またはデバッグするとき、次の選択肢が表示されます。

- 既存のメイクファイルを使用して、Visual Studio で IntelliSense に使用する .vcxproj ファイルを構成するメイクファイル プロジェクトを、Visual Studio で作成します。 (ネイティブの MSBuild プロジェクトで与えられる IDE 機能は一部のみ与えられます。)下の「[メイクファイル プロジェクトを作成するには](#create_a_makefile_project)」を参照してください。
- **[既存コード ファイルからの新しいプロジェクトの作成]** ウィザードを使用し、ソース コードからネイティブ MSBuild プロジェクトを作成します。 元のメイクファイルは、この後は使用されません。 詳細については、「[方法 :既存のコードから C++ プロジェクトを作成する](../how-to-create-a-cpp-project-from-existing-code.md)」を参照してください。
- **Visual Studio 2017 以降**: **[フォルダーを開く]** 機能を使用して、MSBuild システムを介すことなく、メイクファイル プロジェクトをそのまま編集およびビルドします。 詳細については、「[Open Folder projects for C++](../open-folder-projects-cpp.md)」 (C++ の [フォルダーを開く] プロジェクト) をご覧ください。
- **Visual Studio 2019 以降**: Linux 用の UNIX メイクファイル プロジェクトを作成します。

## <a name="a-namecreate_a_makefile_project-to-create-a-makefile-project-with-the-makefile-project-template"></a><a name="create_a_makefile_project"> メイクファイル プロジェクト テンプレートでメイクファイル プロジェクトを作成するには

Visual Studio 2017 以降では、メイクファイル プロジェクト テンプレートは、C++ デスクトップ開発ワークロードがインストールされているときに利用できます。

ウィザードに従い、メイクファイルによって使用されるコマンドと環境を指定します。 その後、このプロジェクトを使用して、Visual Studio でコードをビルドできます。

既定では、ソリューション エクスプローラーにメイクファイル プロジェクトのファイルは表示されません。 メイクファイル プロジェクトで指定したビルド構成は、プロジェクトのプロパティ ページに反映されます。

プロジェクトで指定した出力ファイルは、ビルド スクリプトの生成するファイルの名前には直接は影響しません。 メイクファイルでは、引き続きビルド プロセスの制御とビルド ターゲットの指定を行います。

::: moniker range="vs-2019"

### <a name="to-create-a-makefile-project-in-visual-studio-2019"></a>Visual Studio 2019 でメイクファイル プロジェクトを作成するには

1. Visual Studio のメイン メニューで、 **[ファイル]**  >  **[新規]**  >  **[プロジェクト]** を選択し、検索ボックスに「makefile」と入力します。 または、 **[新しいプロジェクト]** ダイアログ ボックスで **[Visual C++]**  >  **[全般]** (Visual Studio 2015) または **[その他]** (Visual Studio 2017) を展開し、Windows と Linux のどちらが対象であるかに応じて 2 つのオプションから選択します。

1. **Windows のみ**: **[デバッグ構成の設定]** ページで、デバッグと製品ビルドに対してコマンド、出力、クリーンアップ、およびリビルドに関する情報を指定します。 リリース構成に別の設定を指定する場合は、 **[次へ]** をクリックします。

1. **[完了]** をクリックしてダイアログを閉じ、**ソリューション エクスプローラー**で新しく作成したプロジェクトを開きます。

::: moniker-end

::: moniker range="<=vs-2017"

### <a name="to-create-a-makefile-project-in-visual-studio-2015-or-visual-studio-2017"></a>Visual Studio 2015 または Visual Studio 2017 でメイクファイル プロジェクトを作成するには

1. Visual Studio のスタート ページで、 **[新しいプロジェクト]** 検索ボックスに「makefile」と入力します。 あるいは、 **[新しいプロジェクト]** ダイアログ ボックスで **[Visual C++]**  >  **[全般]** (Visual Studio 2015) または **[その他]** (Visual Studio 2017) の順に展開し、[テンプレート] ウィンドウの **[メイクファイル プロジェクト]** を選択してプロジェクト ウィザードを開きます。

1. **[アプリケーションの設定]** ページで、デバッグと製品ビルドに対してコマンド、出力、クリーンアップ、およびリビルドに関する情報を指定します。

1. **[完了]** をクリックしてウィザードを閉じ、**ソリューション エクスプローラー**で新しく作成したプロジェクトを開きます。

::: moniker-end

プロジェクトのプロパティは、プロパティ ページで表示および編集できます。 プロパティ ページの表示については、「[Visual Studio で C++ コンパイラとビルド プロパティを設定する](../working-with-project-properties.md)」を参照してください。

## <a name="makefile-project-wizard"></a>メイクファイル プロジェクト ウィザード

メイクファイル プロジェクトを作成すると、プロジェクトのプロパティ ページの **Nmake** ページで次のオプションを表示し、編集できます。

- **ビルド コマンド ライン:** ユーザーが [ビルド] メニューから [ビルド] を選択したときに実行するコマンド ラインを指定します。 プロジェクトのプロパティ ページの Nmake ページにある [ビルド コマンド ライン] フィールドに表示されます。

- **出力:** コマンド ラインの出力が含まれるファイルの名前を指定します。 既定では、このオプションはプロジェクト名に基づきます。 プロジェクトのプロパティ ページの Nmake ページにある [出力] フィールドに表示されます。

- **クリーン コマンド:** ユーザーが [ビルド] メニューから [クリーン] を選択したときに実行するコマンド ラインを指定します。 プロジェクトのプロパティ ページの Nmake ページにある [クリーン コマンド ライン] フィールドに表示されます。

- **リビルド コマンド ライン:** ユーザーが [ビルド] メニューから [リビルド] を選択したときに実行するコマンド ラインを指定します。 プロジェクトのプロパティ ページの Nmake ページにある [すべてリビルド コマンド ライン] フィールドに表示されます。

## <a name="how-to-enable-intellisense-for-makefile-projects"></a>方法: メイクファイル プロジェクトで IntelliSense を使用可能にする

特定のプロジェクト設定またはコンパイラ オプションが間違っていると、メイクファイル プロジェクトで IntelliSense が失敗します。 次の手順に従って、IntelliSense が想定どおりに動作するようにメイクファイル プロジェクトを構成します。

1. **[プロパティ ページ]** ダイアログ ボックスを開きます。 詳細については、[Visual Studio での C++ コンパイラとビルド プロパティの設定](../working-with-project-properties.md)に関するページを参照してください。

1. **[構成プロパティ]** ノードを展開します。

1. **[NMake]** プロパティ ページを選択し、 **[IntelliSense]** のプロパティを適宜変更します。

   - **[プリプロセッサの定義]** プロパティでメイクファイル プロジェクトのプリプロセッサ シンボルを定義します。 詳細については、「[/D (プリプロセッサの定義)](d-preprocessor-definitions.md)」を参照してください。

   - メイクファイル プロジェクトのプリプロセッサ ディレクティブに渡されるファイル参照を解決する目的でコンパイラが検索するディレクトリの一覧を、 **[インクルードの検索パス]** プロパティで指定します。 詳細については、「[/I (追加インクルード ディレクトリ)](i-additional-include-directories.md)」を参照してください。

    - コマンド ウィンドウから CL.EXE を利用してビルドするプロジェクトの場合、メイクファイル プロジェクトのプリプロセッサ ディレクティブに渡されるファイル参照を解決する目的でコンパイラが検索するディレクトリの一覧を、**INCLUDE** 環境変数で指定します。

   - **[強制インクルード]** プロパティで、メイクファイル プロジェクトのビルド時に処理するヘッダー ファイルを指定します。 詳細については、「[/FI (強制インクルード ファイルの名前の指定)](fi-name-forced-include-file.md)」を参照してください。

   - プロジェクトの .NET アセンブリの参照を解決する目的でコンパイラが検索するディレクトリの一覧を **[アセンブリの検索パス]** プロパティで指定します。 詳細については、「[/AI (メタデータ ディレクトリの指定)](ai-specify-metadata-directories.md)」を参照してください。

   - **[アセンブリの強制使用]** プロパティで、メイクファイル プロジェクトのビルド時に処理する .NET アセンブリを指定します。 詳細については、「[/FU (強制 #using ファイルの名前の指定)](fu-name-forced-hash-using-file.md)」を参照してください。

   - C++ ファイルの解析時に IntelliSense によって使用される追加のコンパイラ スイッチを **[追加のオプション]** プロパティで指定します。

1. **[OK]** をクリックし、プロパティ ページを閉じます。

1. **[すべて保存]** コマンドを使用し、変更後のプロジェクト設定を保存します。

次回、Visual Studio 開発環境でメイクファイル プロジェクトを開くとき、 **[ソリューションのクリーン]** コマンドを実行し、それからメイクファイル プロジェクトで **[ソリューションのビルド]** コマンドを実行します。 IntelliSense が IDE で正しく動作するはずです。

## <a name="see-also"></a>関連項目

[IntelliSense の使用](/visualstudio/ide/using-intellisense)<br>
[NMAKE リファレンス](nmake-reference.md)<br>
[方法: 既存のコードから C++ プロジェクトを作成する](../how-to-create-a-cpp-project-from-existing-code.md)
[メイクファイルの特殊文字](special-characters-in-a-makefile.md)<br/>
[メイクファイルの内容](contents-of-a-makefile.md)<br/>
