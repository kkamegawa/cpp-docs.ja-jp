---
title: 2.4.1 for のコンストラクト
ms.date: 11/04/2016
ms.assetid: 27d2cbce-786b-4819-91d3-d55b2cc57a5e
ms.openlocfilehash: a6cd1733677a6211055a9b06231fb1686c8e2fde
ms.sourcegitcommit: 1819bd2ff79fba7ec172504b9a34455c70c73f10
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/09/2018
ms.locfileid: "51329498"
---
# <a name="241-for-construct"></a>2.4.1 for のコンストラクト

**の**ディレクティブが関連付けられているループのイテレーションが並列で実行されることを指定する反復的な作業の共有のコンストラクトを識別します。 反復処理、**の**ループは、バインドする、parallel コンストラクトを実行するチームに既に存在するスレッド間で分散されます。 構文、**の**コンス トラクターを次に示します。

```
#pragma omp for [clause[[,] clause] ... ] new-line for-loop
```

句は、次のいずれか。

**private(** *variable-list* **)**

**firstprivate(** *variable-list* **)**

**lastprivate(** *variable-list* **)**

**削減 (** *演算子* **:** *変数一覧* **)**

**順序付け**

**スケジュール (** *種類*[**、** *chunk_size*] **)**

**nowait**

**の**ディレクティブに対応する構造体での制限の配置**の**ループします。 具体的には、対応する**の**ループ正規形である必要があります。

**(** *init expr* **;** *var 論理 op b*;*incr expr* **)**

*init expr*<br/>
次のいずれかになります。

*var* = *lb*

*整数型の var* = *lb*

*incr expr*<br/>
次のいずれかになります。

++ *var*

*var* ++

-- *var*

*var* --

*var* += *incr*

*var* -= *incr*

*var* = *var* + *incr*

*var* = *incr* + *var*

*var* = *var* - *incr*

*var*<br/>
符号付き整数変数です。 この変数を共有することがそれ以外の場合は場合、暗黙的になりますプライベートの期間中、**の**します。   本文内でこの変数を変更する必要がない、**の**ステートメント。 変数を指定しない限り**lastprivate**、その値の後、ループが不定になります。

*論理 op*<br/>
次のいずれかになります。

\<

\<=

\>

\>=

*lb*、 *b*、および*incr*<br>
ループのインバリアント整数式。 これらの式の評価中に同期することはありません。 したがって、評価されたすべての副作用は、不確定な結果を生成します。

正規の形式は、エントリ、ループを計算するループのイテレーションの数に注意してください。 この計算の実行の種類で値を持つ*var*、整数の上位変換後にします。 特に、値の*b* - *lb* + *incr*型、結果は不確定で表すことができません。 さらに、if *op 論理*は < または\<= then *incr expr*が発生する必要があります*var*ループの反復ごとに増加します。   場合*論理 op*は > または > = then *incr expr*が発生する必要があります*var*ループの反復ごとに小さくします。

**スケジュール**句を指定する方法のイテレーション、**の**ループは、チームのスレッドに分割します。 プログラムの正確性は、特定のイテレーションを実行するスレッドに依存する必要があります。 値*chunk_size*、指定した場合は正の値をループのインバリアント整数式でなければなりません。 この式の評価中に同期することはありません。 したがって、評価されたすべての副作用は、不確定な結果を生成します。 スケジュール*種類*次のいずれかを指定できます。

表 2-1**スケジュール**句*種類*値

|||
|-|-|
|静的|ときに**スケジュール (静的、** *chunk_size* **)** を指定すると、イテレーションがで指定したサイズのチャンクに分割されて*chunk_size*します。 チャンクはスレッド番号順のラウンド ロビン方式で、チーム内のスレッドに静的に割り当てられます。 ない場合*chunk_size*を指定すると、イテレーションの領域は約サイズが同じで、各スレッドに割り当てられている 1 つのチャンクをチャンクに分かれています。|
|dynamic|ときに**スケジュール (動的、** *chunk_size* **)** を指定すると、イテレーションは、一連の各を格納しているチャンクに分けられます*chunk_size*イテレーション。 各チャンクの割り当てを待機しているスレッドが割り当てられます。 スレッドは、チャンクの処理を実行し、まで、割り当てられるチャンクが残っていないが、次の割り当てを待機します。 イテレーションの数を減らしてを割り当てられる最後のチャンクがあることに注意してください。 ない場合*chunk_size*を指定すると、既定値は 1 です。|
|ガイド付き|ときに**スケジュール (ガイド付き、** *chunk_size* **)** を指定すると、イテレーションはサイズが減少しているチャンク内のスレッドに割り当てられます。 スレッドには、その割り当てられたチャンクの処理が完了すると、[なし] になるまでを別のチャンクでは、動的に割り当てられます。 *Chunk_size* 1、各チャンクのサイズが反復処理をスレッドの数で割った値おおよその数。 これらのサイズを減らす約指数関数的に 1 にします。 *Chunk_size*値を持つ*k* 1 より大きいサイズには指数関数的に小さく*k*最後のチャンクがありますよりも少ないことを除いて、 *k*イテレーション。 ない場合*chunk_size*を指定すると、既定値は 1 です。|
|ランタイム|ときに**schedule (runtime)** が指定されている実行時まで遅延に関するスケジュールが決定します。 スケジュール*種類*を環境変数を設定して実行時に、チャンクのサイズを選択して**OMP_SCHEDULE**します。 この環境変数が設定されていない場合、結果として得られるスケジュールは、実装で定義します。 ときに**schedule (runtime)** が指定されている*chunk_size*指定されていない必要があります。|

明示的に定義されているがない場合は、**スケジュール**句では、既定の**スケジュール**実装で定義されます。

OpenMP 準拠のプログラムは、適切な実行の特定のスケジュールにしないでください。 プログラムがスケジュールに依存する必要がありますしない*種類*を同じスケジュールの実装にバリエーションがある可能性があるために、上記の説明に正確に準拠した*種類*間で異なるコンパイラ。 説明には、特定の状況に適切なスケジュールを選択ができます。

**注文**句必要がある場合に**注文**ディレクティブにバインド、**の**を構築します。

最後に、暗黙的な壁が、**の**れない限り、作成、 **nowait**句を指定します。

制限は、**の**ディレクティブは、次のとおり。

- **の**ループは、構造化ブロックである必要があり、さらに、それを実行する必要がありますを終了できませんが、 **break**ステートメント。

- ループの値の式の制御、**の**ループに関連付けられている、**の**ディレクティブは、チームのすべてのスレッドで同じである必要があります。

- **の**ループの反復変数は符号付き整数型である必要があります。

- 1 つだけ**スケジュール**句に表示できる、**の**ディレクティブ。

- 1 つだけ**注文**句に表示できる、**の**ディレクティブ。

- 1 つだけ**nowait**句に表示できる、**の**ディレクティブ。

- 指定されていない場合または内の任意の辺の効果どのくらいの頻度、 *chunk_size*、 *lb*、 *b*、または*incr*式が発生します。

- 値、 *chunk_size*式は、チームのすべてのスレッドで同じである必要があります。

## <a name="cross-references"></a>クロス リファレンス

- **プライベート**、 **firstprivate**、 **lastprivate**、および**削減**句を参照してください[セクション 2.7.2](../../parallel/openmp/2-7-2-data-sharing-attribute-clauses.md) 25 ページにします。

- **OMP_SCHEDULE**環境変数を参照してください[セクション 4.1](../../parallel/openmp/4-1-omp-schedule.md) 48 ページ。

- **順序付けられた**構築を参照してください[セクション 2.6.6](../../parallel/openmp/2-6-6-ordered-construct.md) 22 ページにします。

- [付録 D](../../parallel/openmp/d-using-the-schedule-clause.md)93、ページ詳細スケジュール句を使用することを示します。