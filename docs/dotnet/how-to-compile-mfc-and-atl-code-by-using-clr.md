---
title: '方法: Clr を使用して MFC および ATL コードをコンパイルします。'
ms.custom: get-started-article
ms.date: 11/04/2016
helpviewer_keywords:
- MFC [C++], interoperability
- ATL [C++], interoperability
- mixed assemblies [C++], MFC code
- mixed assemblies [C++], ATL code
- /clr compiler option [C++], compiling ATL and MFC code
- interoperability [C++], /clr compiler option
- regular MFC DLLs [C++], /clr compiler option
- interop [C++], /clr compiler option
- extension DLLs [C++], /clr compiler option
ms.assetid: 12464bec-33a4-482c-880a-c078de7f6ea5
ms.openlocfilehash: 9a24e82787eb0fce8ff668843e73de9f2d05e1ad
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "62379049"
---
# <a name="how-to-compile-mfc-and-atl-code-by-using-clr"></a>方法: MFC および ATL コードを使用して、/clr をコンパイルします。

このトピックでは、共通言語ランタイムをターゲットに既存の MFC および ATL プログラムをコンパイルする方法について説明します。

### <a name="to-compile-an-mfc-executable-or-regular-mfc-dll-by-using-clr"></a>/Clr を使用して MFC 実行可能ファイルまたはレギュラー MFC DLL をコンパイルするには

1. プロジェクトを右クリックして**ソリューション エクスプ ローラー**し**プロパティ**します。

1. **プロジェクトのプロパティ** ダイアログ ボックスで、次に、ノードを展開**構成プロパティ**選択と**全般**します。 右側のウィンドウで **プロジェクトの既定値**設定**共通言語ランタイム サポート**に**共通言語ランタイム サポート (/clr)** します。

   同じウィンドウで**MFC の使用**に設定されている**共有 DLL で MFC を使用する**します。

1. **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**全般**。 確認します**デバッグ情報の形式**に設定されている**プログラム データベース/Zi** (いない **/ZI**)。

1. 選択、**コード生成**ノード。 設定**最小リビルドを有効にする**に**いいえ (/Gm-)** します。 設定**基本ランタイム チェック**に**既定**します。

1. **構成プロパティ**を選択します**C/C++** し**コード生成**します。 必ず**ランタイム ライブラリ**に設定されている**マルチ スレッド デバッグ DLL (/MDd)** または**マルチ スレッド DLL (/MD)** します。

1. Stdafx.h に、次の行を追加します。

    ```
    #using <System.Windows.Forms.dll>
    ```

### <a name="to-compile-an-mfc-extension-dll-by-using-clr"></a>/Clr を使用して MFC 拡張 DLL をコンパイルするには

1. "に MFC 実行可能ファイルまたはレギュラー MFC DLL をコンパイル/clr を使用して"の手順に従います。

1. **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**プリコンパイル済みヘッダー**します。 設定**プリコンパイル済みヘッダーの作成/使用**に**プリコンパイル済みヘッダーを使用していない**します。

   代わりで**ソリューション エクスプ ローラー**Stdafx.cpp を右クリックし、クリックして**プロパティ**します。 **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**全般**。 設定**共通言語ランタイム サポートを使用してコンパイル**に**いいえ共通言語ランタイム サポート**します。

1. DllMain およびのものを含むファイルを呼び出してで**ソリューション エクスプ ローラー**ファイルを右クリックし、クリックして**プロパティ**します。 **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**全般**。 右側のウィンドウで **プロジェクトの既定値**設定**共通言語ランタイム サポートを使用してコンパイル**に**いいえ共通言語ランタイム サポート**。

### <a name="to-compile-an-atl-executable-by-using-clr"></a>/Clr を使用して、ATL 実行可能ファイルをコンパイルするには

1. **ソリューション エクスプ ローラー**プロジェクトを右クリックし、クリックして**プロパティ**します。

1. **プロジェクトのプロパティ** ダイアログ ボックスで、次に、ノードを展開**構成プロパティ**選択と**全般**します。 右側のウィンドウで **プロジェクトの既定値**設定**共通言語ランタイム サポート**に**共通言語ランタイム サポート (/clr)** します。

1. **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**全般**。 確認します**デバッグ情報の形式**に設定されている**プログラム データベース/Zi** (いない **/ZI**)。

1. 選択、**コード生成**ノード。 設定**最小リビルドを有効にする**に**いいえ (/Gm-)** します。 設定**基本ランタイム チェック**に**既定**します。

1. **構成プロパティ**を選択します**C/C++** し**コード生成**します。 必ず**ランタイム ライブラリ**に設定されている**マルチ スレッド デバッグ DLL (/MDd)** または**マルチ スレッド DLL (/MD)** します。

1. MIDL で生成された、すべてのファイル (C ファイル) 内のファイルを右クリックして**ソリューション エクスプ ローラー**し**プロパティ**します。 **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**全般**。 設定**共通言語ランタイム サポートを使用してコンパイル**に**いいえ共通言語ランタイム サポート**します。

### <a name="to-compile-an-atl-dll-by-using-clr"></a>/Clr を使用して、ATL DLL をコンパイルするには

1. /Clr を使用して、ATL 実行可能ファイルをコンパイル"するには」セクションの手順に従います。

1. **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**プリコンパイル済みヘッダー**します。 設定**プリコンパイル済みヘッダーの作成/使用**に**プリコンパイル済みヘッダーを使用していない**します。

   代わりで**ソリューション エクスプ ローラー**Stdafx.cpp を右クリックし、クリックして**プロパティ**します。 **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**全般**。 設定**共通言語ランタイム サポートを使用してコンパイル**に**いいえ共通言語ランタイム サポート**します。

1. DllMain およびのものを含むファイルを呼び出してで**ソリューション エクスプ ローラー**ファイルを右クリックし、クリックして**プロパティ**します。 **構成プロパティ**、横に、ノードを展開**C/C++** 選択と**全般**。 右側のウィンドウで **プロジェクトの既定値**設定**共通言語ランタイム サポートを使用してコンパイル**に**いいえ共通言語ランタイム サポート**。

## <a name="see-also"></a>関連項目

[混在 (ネイティブおよびマネージド) アセンブリ](../dotnet/mixed-native-and-managed-assemblies.md)
