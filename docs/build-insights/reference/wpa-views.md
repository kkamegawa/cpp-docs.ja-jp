---
title: 'リファレンス: Windows パフォーマンスアナライザーのビュー'
description: Windows Performance C++ Analyzer で使用できるビルド洞察ビューのリファレンスです。
ms.date: 11/03/2019
helpviewer_keywords:
- C++ Build Insights
- throughput analysis
- build time analysis
- vcperf.exe
ms.openlocfilehash: eb3e20ed3ca4231b10efaf36310f6fbc0f5980bf
ms.sourcegitcommit: 3e8fa01f323bc5043a48a0c18b855d38af3648d4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/05/2020
ms.locfileid: "78333894"
---
# <a name="reference-windows-performance-analyzer-views"></a>リファレンス: Windows パフォーマンスアナライザーのビュー

::: moniker range="<=vs-2017"

Visual C++ Studio 2019 では、Build Insights ツールを使用できます。 そのバージョンのドキュメントを表示するには、この記事の Visual Studio バージョンセレクターコントロールを Visual Studio 2019 に設定します。

::: moniker-end
::: moniker range="vs-2019"

この記事では、 C++ Windows Performance ANALYZER (WPA) で利用可能な各ビルド洞察ビューの詳細について説明します。 このページを使用して、次のものを検索します。

- データ列の説明。そして
- 使用法や優先する表示モードなど、各ビューに使用できるプリセットです。

WPA を初めて使用する場合は、まず、[ビルドインサイトの wpa の基本についC++ ](/cpp/build-insights/tutorials/wpa-basics)て理解しておくことをお勧めします。

## <a name="build-explorer"></a>ビルド エクスプローラー

ビルドエクスプローラービューは、次の場合に使用します。

- 並列処理の問題を診断する
- ビルド時間が、解析、コード生成、またはリンクのどちらであるかを判断する
- ボトルネックを特定し、ビルドアクティビティが異常に長くなるようにします。

### <a name="build-explorer-view-data-columns"></a>ビルドエクスプローラービューのデータ列

| 列名 | Description |
|-|-|
| BuildTimelineDescription | 現在のアクティビティまたはプロパティが発生したタイムラインを説明するテキスト。 |
| BuildTimelineId          | 現在のアクティビティまたはプロパティが発生したタイムラインの、0から始まる識別子。 |
| コンポーネント                | 現在のイベントが生成されたときにコンパイルまたはリンクされているコンポーネント。 この列の値は、このイベントに関連付けられているコンポーネントがない場合に *\<呼び出し X 情報\>* です。 X は、イベントが生成されたときに実行される呼び出しの一意の数値識別子です。 この識別子は、このイベントの InvocationId 列にある識別子と同じです。 |
| Count                    | このデータ行によって表されるアクティビティまたはプロパティの数。 この値は常に1であり、複数の行がグループ化されている場合にのみ、集計シナリオに役立ちます。 |
| ExclusiveCPUTime         | このアクティビティによって使用された CPU 時間 (ミリ秒単位)。 子アクティビティに費やされた時間は、この金額に含まれていません。 |
| ExclusiveDuration        | アクティビティのミリ秒単位の時間。 子アクティビティの期間は、この金額に含まれていません。 |
| InclusiveCPUTime         | このアクティビティとすべての子アクティビティによって使用された CPU 時間 (ミリ秒単位)。 |
| InclusiveDuration        | すべての子アクティビティを含む、このアクティビティのミリ秒間の時間。 |
| InvocationDescription    | このイベントが発生した呼び出しの説明テキスト。 説明には、 *cl.exe*であるか、*リンカー*であるか、および一意の数値の呼び出し識別子が含まれます。 必要に応じて、呼び出し時にコンパイルまたはリンクされたコンポーネントへの完全パスが含まれます。 コンポーネントをビルドしない呼び出し、または複数のコンポーネントをビルドする呼び出しの場合、パスは空白になります。 呼び出し識別子は、InvocationId 列のものと同じです。 |
| InvocationId             | このイベントが発生した呼び出しの一意の数値識別子。 |
| Name                     | このイベントによって表されるアクティビティまたはプロパティの名前。 |
| Time                     | イベントが発生した日時を示すタイムスタンプ。 |
| ツール                     | このイベントが発生したときに実行するツール。 この列の値は、CL または Link です。 |
| 種類                     | 現在のイベントの種類。 この値は、アクティビティまたはプロパティのいずれかです。 |
| 値                    | 現在のイベントがプロパティの場合、この列には値が格納されます。 現在のイベントがアクティビティの場合、この列は空白のままになります。 |

### <a name="build-explorer-view-presets"></a>ビルドエクスプローラービュープリセット

| プリセット名           | 優先ビューモード | 使用方法 |
|-----------------------|---------------------|------------|
| アクティビティの統計   | グラフ/テーブル       | このプリセットを使用して、すべてのビルドエクスプローラーアクティビティの集計された統計情報を表示します。 テーブルモードでは、ビルドが解析、コード生成、またはリンカーによって優位であるかどうかを一目で確認できます。 各活動の集計された期間は、降順に並べ替えられます。 最上位ノードを展開してドリルインすることで、これらの上位のアクティビティに最も時間がかかる呼び出しを簡単に見つけることができます。 必要に応じて、WPA 設定を調整して、平均やその他の種類の集計を表示できます。 グラフモードでは、ビルド中に各アクティビティがアクティブになっていることを確認します。 |
| 呼び           | グラフ               | [開始時刻] で並べ替えられた、グラフビュー内の呼び出しの一覧を下にスクロールします。 CPU (サンプリング) ビューと共に使用して、CPU 使用率が低いゾーンに配置されている呼び出しを見つけることができます。 並列処理の問題を検出します。 |
| 呼び出しプロパティ | テーブル               | 特定のコンパイラまたはリンカーの呼び出しに関する重要な情報をすばやく検索します。 バージョン、作業ディレクトリ、またはその呼び出しに使用される完全なコマンドラインを特定します。 |
| タイムライン             | グラフ               | ビルドがどのように並列処理されたかを棒グラフで確認できます。 並列処理の問題とボトルネックを一目で特定します。 必要に応じて、さまざまな意味をバーに割り当てるように WPA を構成します。 最後にグループ化された列として [呼び出しの説明] を選択すると、すべての呼び出しの色のコード化された棒グラフが表示されます。 これは、時間のかかる発生をすばやく特定するのに役立ちます。 次に、ズームインし、最後にグループ化された列としてアクティビティ名を選択して、最も長い部分を表示します。 |

## <a name="files"></a>ファイル

ファイルビューは、次の場合に使用します。

- 最も頻繁に含まれるヘッダーを決定する
- プリコンパイル済みヘッダー (PCH) に含める内容を決定するのに役立ちます。

### <a name="files-view-data-columns"></a>ファイルビューのデータ列

| 列名              | Description |
|--------------------------|-------------|
| ActivityName             | このファイルイベントが生成されたときに実行中のアクティビティ。 現在、この値は常に*解析*されています。 |
| BuildTimelineDescription | * |
| BuildTimelineId          | * |
| コンポーネント                | * |
| Count                    | * |
| 奥行き                    | このファイルが存在する、インクルードツリー内のインデックス番号が0から始まる位置。 カウントは、インクルードツリーのルートから開始されます。 値0は、通常、.c または .cpp ファイルに対応します。 |
| ExclusiveDuration        | * |
| IncludedBy               | 現在のファイルが含まれているファイルの完全パス。 |
| IncludedPath             | 現在のファイルの完全パス。 |
| InclusiveDuration        | * |
| InvocationId             | * |
| StartTime                | 現在のファイルイベントが生成された時刻を表すタイムスタンプ。 |
| ツール                     | * |

この列の値は、[[ビルドエクスプローラー](#build-explorer-view-data-columns) ] ビューの場合と同じ \* ます。

### <a name="files-view-presets"></a>ファイルビューのプリセット

| プリセット名 | 優先ビューモード | 使用方法 |
|-------------|---------------------|------------|
| 統計  | テーブル               | リストを降順に表示することによって、集計された解析時間が最も高いファイルを確認します。 この情報は、ヘッダーを再構築したり、PCH に含める内容を決定したりするのに役立ちます。 |

## <a name="functions"></a>関数

関数ビューは、コード生成時間が非常に長い関数を識別するために使用されます。

### <a name="functions-view-data-columns"></a>関数ビューのデータ列

| 列名              | Description |
|--------------------------|-------------|
| ActivityName             | この関数イベントが生成されたときに実行中のアクティビティ。 現在、この値は常に*Codegeneration*です。 |
| BuildTimelineDescription | * |
| BuildTimelineId          | * |
| コンポーネント                | * |
| Count                    | * |
| Duration                 | この関数のコード生成アクティビティの期間。 |
| FunctionName             | コード生成中の関数の名前。 |
| InvocationId             | * |
| StartTime                | 現在の関数イベントが生成された日時を表すタイムスタンプ。 |
| ツール                     | * |

この列の値は、[[ビルドエクスプローラー](#build-explorer-view-data-columns) ] ビューの場合と同じ \* ます。

### <a name="functions-view-presets"></a>関数ビューのプリセット

| プリセット名 | 優先ビューモード | 使用方法 |
|-------------|---------------------|------------|
| 統計  | テーブル               | リストを降順に表示することによって、最も集計されたコード生成時間を持つ関数を確認します。 コードで **__forceinline**キーワードが過剰に使用されているか、一部の関数が大きすぎる可能性があります。 |
| タイムライン   | グラフ               | 生成に最も時間がかかる関数の場所と期間については、この横棒グラフをご覧ください。 ビルドエクスプローラービューで、それらがボトルネックと一致しているかどうかを確認します。 実行されている場合は、適切なアクションを実行して、コードの生成時間を短縮し、ビルド時間を向上させます。 |

## <a name="see-also"></a>参照

[ビルドインサイトC++\ を使って](/cpp/build-insights/get-started-with-cpp-build-insights)みる
[リファレンス: vcperf コマンド](vcperf-commands.md)\
[チュートリアル: Windows パフォーマンスアナライザーの基本](/cpp/build-insights/tutorials/wpa-basics)\
[Windows Performance Analyzer](/windows-hardware/test/wpt/windows-performance-analyzer)

::: moniker-end
