---
title: TN024:MFC で定義されているメッセージおよびリソース
ms.date: 11/04/2016
helpviewer_keywords:
- resources [MFC]
- Windows messages [MFC], MFC-defined
- messages [MFC], MFC
- TN024
ms.assetid: c65353ce-8096-454b-ad22-1a7a1dd9a788
ms.openlocfilehash: 300819878bd7422dc8f3970493e303aa52346a58
ms.sourcegitcommit: 934cb53fa4cb59fea611bfeb9db110d8d6f7d165
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/14/2019
ms.locfileid: "65611425"
---
# <a name="tn024-mfc-defined-messages-and-resources"></a>TN024:MFC で定義されているメッセージおよびリソース

> [!NOTE]
>  次のテクニカル ノートは、最初にオンライン ドキュメントの一部とされてから更新されていません。 結果として、一部のプロシージャおよびトピックが最新でないか、不正になります。 最新の情報について、オンライン ドキュメントのキーワードで関係のあるトピックを検索することをお勧めします。

ここでは、Windows の内部メッセージと MFC で使用されるリソースの形式について説明します。 この情報は、フレームワークの実装について説明して、アプリケーションのデバッグに役立ちます。 冒険、この情報はすべてが正式にサポートされていない場合でも使用できますこの情報の一部の高度な実装。

このノートには、MFC プライベート実装の詳細が含まれています。すべての内容は、今後変更される可能性が。 MFC プライベート Windows メッセージは、1 つのアプリケーションのみのスコープ内で意味を持ちますが、システム全体のメッセージを格納する、将来変更されます。

範囲の MFC プライベート Windows メッセージおよびリソースの種類"system"という予約済みの範囲内に確保して Microsoft Windows。 範囲は現在のすべての数値を使用して、今後は、範囲内の新しい番号が使用されます。 現在使用されている番号を変更することがあります。

メッセージは、範囲 0x360 MFC プライベート Windows には、0x37F]-> [です。

MFC のプライベートなリソースの種類は範囲 0xF0 ですでは、0 xff -> します。

**MFC プライベート Windows メッセージ**

これらの Windows メッセージは、比較的疎結合が必要になるウィンドウ オブジェクト間されずに、C++ の仮想関数は適切な C++ の仮想関数の代わりに使用されます。

これらのプライベート Windows メッセージと関連付けられているパラメーター構造体が MFC プライベート ヘッダーで宣言されている ' AFXPRIV します。H'。 このヘッダーを含むコードのいずれかの可能性がありますに依存ドキュメントに未記載の動作とは壊れる可能性が高い将来のバージョンの MFC を警告表示されます。

これらのメッセージを処理する必要があるのまれなケースを ON_MESSAGE メッセージ マップ マクロを使用し、汎用 LRESULT/WPARAM/LPARAM 形式のメッセージを処理します。

**WM_QUERYAFXWNDPROC**

このメッセージは、作成されるウィンドウに送信されます。 場合は、WndProc を特定する方法として、作成プロセスの非常に早い段階で送信された**プロシージャ。 します。プロシージャ。** 1 を返します。

|||
|-|-|
|wParam|未使用|
|lParam|未使用|
|の場合、|によって処理される場合は 1**プロシージャ。**|

**WM_SIZEPARENT**

サイズ変更中に、このメッセージをフレーム ウィンドウでその直接の子に送信 (`CFrameWnd::OnSize`呼び出し`CFrameWnd::RecalcLayout`呼び出す`CWnd::RepositionBars`) フレームの面がコントロール バーの位置を変更します。 AFX_SIZEPARENTPARAMS 構造を呼び出すと、親と (これは NULL になります) HDWP の現在の利用可能なクライアントの四角形が含まれる`DeferWindowPos`再描画を最小限に抑える。

|||
|-|-|
|wParam|未使用|
|lParam|AFX_SIZEPARENTPARAMS 構造体のアドレス|
|の場合、|(0) を使用しません。|

メッセージを無視してには、レイアウトにウィンドウが参加することを示します。

**WM_SETMESSAGESTRING**

このメッセージは、ステータス バーにメッセージ行を更新するように指示するフレーム ウィンドウに送信されます。 指定された (ただし、両方は必要ありません)、文字列 ID または、LPCSTR のいずれかを指定できます。

|||
|-|-|
|wParam|文字列 ID (または 0)|
|lParam|LPCSTR の文字列 (または NULL)|
|の場合、|(0) を使用しません。|

**WM_IDLEUPDATECMDUI**

このメッセージは、更新コマンド UI ハンドラーのアイドル時間の更新プログラムの実装のアイドル時間に送信されます。 作成ウィンドウ (通常はコントロール バー) は、メッセージを処理する場合、`CCmdUI`オブジェクト (または派生クラスのオブジェクト) を呼び出すと`CCmdUI::DoUpdate`ウィンドウ内の「項目」の各します。 これは、コマンド ハンドラー チェーン内のオブジェクトの ON_UPDATE_COMMAND_UI ハンドラーのさらに確認します。

|||
|-|-|
|wParam|BOOL bDisableIfNoHandler|
|lParam|(0) を使用しません。|
|の場合、|(0) を使用しません。|

*bDisableIfNoHandler* 0 以外の場合、ON_UPDATE_COMMAND_UI でも、ON_COMMAND ハンドラーがある場合は、UI オブジェクトを無効にします。

**WM_EXITHELPMODE**

このメッセージが投稿された、`CFrameWnd`終了コンテキストに依存するヘルプ モード。 このメッセージの受信によって開始されたモーダル ループを終了する`CFrameWnd::OnContextHelp`します。

|||
|-|-|
|wParam|(0) を使用しません。|
|lParam|(0) を使用しません。|
|の場合、|未使用|

**WM_INITIALUPDATE**

このメッセージは、安全が最初の更新を実行できるようになったときに、フレーム ウィンドウのすべての子孫にドキュメント テンプレートで送信されます。 呼び出しにマップ`CView::OnInitialUpdate`他で使用できますが、 `CWnd`-その他の 1 回限りの更新用のクラスを派生します。

|||
|-|-|
|wParam|(0) を使用しません。|
|lParam|(0) を使用しません。|
|の場合、|(0) を使用しません。|

**WM_RECALCPARENT**

このメッセージは、ビューによって、親ウィンドウに送信されます (経由で取得した`GetParent`) レイアウトの再計算を強制する (通常は、親が呼び出す`RecalcLayout`)。 これは OLE サーバー アプリケーションで使用サイズの拡大、ビューの合計サイズが増加するフレームの必要があります。

親ウィンドウは、このメッセージを処理する場合に TRUE を返して、lParam をクライアント領域の新しいサイズに渡された rect。 これは使用`CScrollView`スクロール バー (が追加されると、ウィンドウの外側に配置) を適切に処理するときに、サーバー オブジェクトがインプレース アクティブ化します。

|||
|-|-|
|wParam|(0) を使用しません。|
|lParam|LPRECT rectClient、NULL にすることがあります。|
|の場合、|TRUE の場合は、新しいクライアントの四角形を返します。 FALSE|

**WM_SIZECHILD**

によってこのメッセージを送信`COleResizeBar`、オーナー ウィンドウを (を使用して`GetOwner`)、ユーザーがサイズ変更ハンドルのサイズ変更のバーをサイズ変更します。 `COleIPFrameWnd` ユーザーが要求して、フレーム ウィンドウの位置を変更しようとしています。 このメッセージに応答します。

サイズ変更、バーを含むフレーム ウィンドウに対するクライアント座標で指定された、新しい四角形には、lParam によってにアドレスが示されます。

|||
|-|-|
|wParam|(0) を使用しません。|
|lParam|LPRECT rectNew|
|の場合、|(0) を使用しません。|

**WM_DISABLEMODAL**

このメッセージは、非アクティブにするフレーム ウィンドウが所有するすべてのポップアップ ウィンドウに送信されます。 フレーム ウィンドウでは、結果を使用して、ポップアップ ウィンドウを無効にするかどうかを調べます。

フレームがモーダル状態に入ったときにポップアップ ウィンドウで特別な処理を実行する、または特定のポップアップ ウィンドウを無効にすることを防ぐため、これを使用することができます。 ツールヒントでは、このメッセージを使用して、たとえばフレーム ウィンドウがモーダルの状態に入ると、自分自身を破棄します。

|||
|-|-|
|wParam|(0) を使用しません。|
|lParam|(0) を使用しません。|
|の場合、|0 以外に**いない**ウィンドウを無効にする、0 は、ウィンドウが無効にすることを示します|

**WM_FLOATSTATUS**

このメッセージは、フレームがアクティブまたは別の最上位レベルのフレーム ウィンドウを非アクティブ化されたときに、フレーム ウィンドウが所有するすべてのポップアップ ウィンドウに送信されます。 これは、使用で返さの実装によって`CMiniFrameWnd`これらのポップアップ ウィンドウのアクティブ化のトップ レベルのフレーム ウィンドウのアクティブ化との同期を保持するためにします。

|||
|-|-|
|wParam|次の値のいずれかです。<br /><br /> FS_SHOW<br /><br /> FS_HIDE<br /><br /> FS_ACTIVATE<br /><br /> FS_DEACTIVATE<br /><br /> FS_ENABLEFS_DISABLE<br /><br /> FS_SYNCACTIVE|
|lParam|(0) を使用しません。|

戻り値は 0 以外の場合、FS_SYNCACTIVE が設定され、ウィンドウとがアクティブにする必要があります、親フレーム。 `CMiniFrameWnd` 返さにスタイルが設定されている場合は、0 以外を返します。

詳細については、の実装を参照してください。`CMiniFrameWnd`します。

## <a name="wmactivatetoplevel"></a>WM_ACTIVATETOPLEVEL

このメッセージは、その「最上位グループ」内のウィンドウがアクティブまたは非アクティブ化されたときに、トップレベル ウィンドウに送信されます。 ウィンドウは、トップレベル ウィンドウ (いない親または所有者) またはそのようなウィンドウによって所有されている場合、最上位レベルのグループの一部です。 このメッセージは、使い方を使用と似ていますが、(OLE アプリケーションで一般的な) 1 つのウィンドウ階層内の場所が異なるプロセスに属している状況では混合します。

## <a name="wmcommandhelp-wmhelphittest-wmexithelpmode"></a>よう、領域、WM_EXITHELPMODE

これらのメッセージは、状況依存のヘルプの実装で使用されます。 参照してください[テクニカル ノート 28:](../mfc/tn028-context-sensitive-help-support.md)詳細についてはします。

## <a name="mfc-private-resource-formats"></a>MFC のプライベート リソースの形式

現時点では、MFC では、2 つのプライベート リソース形式を定義します。RT_TOOLBAR リソース形.

## <a name="rttoolbar-resource-format"></a>RT_TOOLBAR リソースの形式

AppWizard によって提供される既定のツールバーは、MFC 4.0 で導入された、RT_TOOLBAR カスタム リソースに基づきます。 ツールバー エディターを使用してこのリソースを編集することができます。

## <a name="rtdlginit-resource-format"></a>リソース形リソースの形式

MFC のプライベートなリソースの 1 つの形式を使用して、追加のダイアログの初期化情報を格納します。 これには、コンボ ボックスに格納されている最初の文字列が含まれています。 このリソースの形式は、手動で編集するものはありませんが、Visual C によって処理されます。

VisualC++とこのリソース形リソースがリソースの情報を使用する代わりに API があるので、MFC の関連機能を使用する必要はありません。 Visual C を使用すると、記述、保守、および長期的にアプリケーションを変換するはるかに簡単になります。

リソース形リソースの基本的な構造は次のとおりです。

```
+---------------+    \
| Control ID    |   UINT             |
+---------------+    |
| Message #     |   UINT             |
+---------------+    |
|length of data |   DWORD            |
+---------------+    |   Repeated
|   Data        |   Variable Length  |   for each control
|   ...         |   and Format       |   and message
+---------------+    /
|     0         |   BYTE
+---------------+
```

繰り返されるセクションには、メッセージを送信するコントロールの ID が含まれ、メッセージ # (標準 Windows メッセージ) の送信と可変長のデータをします。 Windows メッセージは、フォームに送信されます。

```
SendDlgItemMessage(<Control ID>, <Message #>, 0, &<Data>);
```

これは、任意の Windows メッセージおよびデータ コンテンツを許可する、非常に一般的な形式です。 Visual C リソース エディターと MFC は、Windows メッセージの限定されたサブセットしかサポートします。(データはテキスト文字列) コンボ ボックスの一覧の初期選択 CB_ADDSTRING します。

## <a name="see-also"></a>関連項目

[番号順テクニカル ノート](../mfc/technical-notes-by-number.md)<br/>
[カテゴリ別テクニカル ノート](../mfc/technical-notes-by-category.md)
