---
title: '#include ディレクティブ (C/C++)'
ms.date: 08/29/2019
f1_keywords:
- '#include'
helpviewer_keywords:
- preprocessor, directives
- '#include directive'
- include directive (#include)
ms.assetid: 17067dc0-8db1-4f2d-b43e-ec12ecf83238
ms.openlocfilehash: 0792f522427e5658de992969745878894fbd454d
ms.sourcegitcommit: 6e1c1822e7bcf3d2ef23eb8fac6465f88743facf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/03/2019
ms.locfileid: "70220250"
---
# <a name="include-directive-cc"></a>#include ディレクティブ (C/C++)

指定されたファイルの内容をソース プログラムに読み込むように、このディレクティブが出現した時点でプリプロセッサに指示します。

## <a name="syntax"></a>構文

> **#include**"*パス仕様*" \
> **#include**\<*パス-仕様*>

## <a name="remarks"></a>Remarks

定数とマクロの定義をインクルードファイルに整理し、 **#include**ディレクティブを使用して任意のソースファイルに追加することができます。 インクルード ファイルは外部変数や複合データ型の宣言を組み込むためにも便利です。 それらの型の定義と名前付けは、その目的で作成したインクルード ファイル内で一度だけ行います。

*パス仕様*は、必要に応じてディレクトリ指定を前に付けることができるファイル名です。 そのファイル名は既存のファイルの名前であることが必要です。 *パス仕様*の構文は、プログラムがコンパイルされるオペレーティングシステムによって異なります。

[/clr](../build/reference/clr-common-language-runtime-compilation.md) を使用してコンパイルされたC++アプリケーションでアセンブリを参照する方法の詳細については、「 [#using](../preprocessor/hash-using-directive-cpp.md)」を参照してください。

どちらの構文形式でも、そのディレクティブは指定したインクルード ファイルの内容全体に置き換わります。 2 つの構文形式間の違いは、不完全なパスが指定されているときに、プリプロセッサがヘッダー ファイルを検索する順序です。 次の表に 2 つの構文形式間の違いを示します。

|構文形式|アクション|
|---|------------|
|引用符形式|プリプロセッサはインクルード ファイルを次の順序で検索します。<br/><br/> 1) **#include**ステートメントを含むファイルと同じディレクトリにあります。<br/><br/> 2) 現在開いているインクルードファイルのディレクトリ内で、開いた順序と逆の順序で表示されます。 ディレクトリの検索は親インクルード ファイルのディレクトリから始まり、上方向へ移動して親の親インクルード ファイルのディレクトリへと続きます。<br/><br/> 3) 各 **/i**コンパイラオプションで指定されたパスに沿って。<br/><br/> 4) INCLUDE 環境変数で指定されたパスに沿っています。|
|山かっこ形式|プリプロセッサはインクルード ファイルを次の順序で検索します。<br/><br/> 1) 各 **/i**コンパイラオプションで指定されたパスに沿って。<br/><br/> 2) コンパイルは、INCLUDE 環境変数で指定されたパスに沿って、コマンドラインで実行されます。|

プリプロセッサは指定された名前のファイルが見つかるとすぐに検索を停止します。 二重引用符 (`" "`) の間にインクルードファイルのあいまいでない完全なパスを指定すると、プリプロセッサはそのパスの指定のみを検索し、標準ディレクトリを無視します。

二重引用符で囲んだファイル名が不完全なパスで指定されている場合、プリプロセッサはまず "親" ファイルのディレクトリを検索します。 親ファイルは、 **#include**ディレクティブを含むファイルです。 たとえば、file1 という名前のファイルを*file1*という名前の*ファイルに含める*と、 *file1*は親ファイルになります。

インクルードファイルは "nested" にすることができます。 **#Include**ディレクティブは、別の **#include**ディレクティブによって名前が付けられたファイルに記述できます。 たとえば、 *file2*には*file3*を含めることができます。 この場合、 *file1*は依然として*file2*の親になりますが、 *file3*の "祖父母" になります。

インクルードファイルが入れ子になっており、コマンドラインでコンパイルが行われる場合、ディレクトリ検索は親ファイルのディレクトリから開始されます。 次に、すべての親ファイルのディレクトリを処理します。 したがって、検索は現在処理中のソースが含まれるディレクトリに対して相対的に開始されます。 ファイルが見つからない場合、検索は[/i (追加のインクルードディレクトリ)](../build/reference/i-additional-include-directories.md)コンパイラオプションで指定されたディレクトリに移動します。 最後に、INCLUDE 環境変数で指定したディレクトリが検索されます。

Visual Studio 開発環境では、INCLUDE 環境変数は無視されます。 インクルードファイルとライブラリファイルを検索するディレクトリを設定する方法については、「 [VC++ ディレクトリ」プロパティページ](../build/reference/vcpp-directories-property-page.md)を参照してください。

次の例では、山かっこ形式を使用したファイルのインクルードを示します。

```C
#include <stdio.h>
```

この例では、STDIO.H というファイルの内容をソース プログラムに追加します。 山かっこを使用すると、プリプロセッサは、INCLUDE 環境変数で指定されているディレクトリを STDIO に検索します。H は、 **/i**コンパイラオプションで指定されたディレクトリを検索した後に実行します。

次の例では、引用符形式を使用したファイルのインクルードを示します。

```C
#include "defs.h"
```

この例では、DEFS.H で指定されたファイルの内容をソース プログラムに追加します。 引用符形式では、プリプロセッサは、親のソース ファイルがあるディレクトリをまず検索します。

インクルード ファイルの入れ子は最大 10 レベルまで可能です。 入れ子になった **#include**が処理されると、プリプロセッサは、外側のインクルードファイルを元のソースファイルに挿入し続けます。

**Microsoft 固有の仕様**

インクルードできるソースファイルを見つけるために、プリプロセッサは、 **/i**コンパイラオプションで指定されたディレクトリを最初に検索します。 **/I**オプションが存在しない場合、または失敗した場合、プリプロセッサは include 環境変数を使用して、山かっこで囲まれたインクルードファイルを検索します。 INCLUDE 環境変数と **/i**コンパイラオプションには、セミコロン ( **;** ) で区切られた複数のパスを含めることができます。 複数のディレクトリが **/i**オプションの一部として表示される場合、または INCLUDE 環境変数内に存在する場合は、プリプロセッサによって、出現順に検索されます。

たとえば、次のコマンドがあるとします。

```cmd
CL /ID:\MSVC\INCLUDE MYPROG.C
```

このコマンドにより、プリプロセッサは D:\MSVC\INCLUDE\ ディレクトリ内で STDIO.H などのインクルード ファイルを検索します。 また、次のコマンドがあるとします。

```cmd
SET INCLUDE=D:\MSVC\INCLUDE
CL MYPROG.C
```

このコマンドでも同じ結果になります。 いずれの検索も失敗した場合は、致命的なコンパイル エラーが発生します。

インクルード ファイルの名前がコロンを含む完全なパスで指定されている場合 (F:\MSVC\SPECIAL\INCL\TEST.H など)、プリプロセッサはそのパスをたどります。

として`#include "path-spec"`指定されているインクルードファイルの場合、ディレクトリの検索は親ファイルのディレクトリから開始され、親の親ファイルのディレクトリから順に進みます。 つまり、検索は、処理されている **#include**ディレクティブを含むソースファイルが格納されているディレクトリに対して相対的に開始されます。 親の親ファイルが存在せず、見つからなかった場合は、ファイル名が山かっこで囲まれているものとして検索が続行されます。

**Microsoft 固有の仕様はここまで**

## <a name="see-also"></a>関連項目

[プリプロセッサディレクティブ](../preprocessor/preprocessor-directives.md)\
[/I (追加のインクルードディレクトリ)](../build/reference/i-additional-include-directories.md)
