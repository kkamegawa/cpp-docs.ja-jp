---
title: マクロ (C/C++)
ms.date: 08/29/2019
helpviewer_keywords:
- preprocessor
- preprocessor, macros
- Visual C++, preprocessor macros
ms.assetid: a7bfc5d4-2537-4fe0-bef0-70cec0b43388
ms.openlocfilehash: ba2c0f012974a528876219d00c61c0f31a6cd820
ms.sourcegitcommit: 6e1c1822e7bcf3d2ef23eb8fac6465f88743facf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/03/2019
ms.locfileid: "70218863"
---
# <a name="macros-cc"></a>マクロ (C/C++)

プリプロセッサでは、*プリプロセッサディレクティブ*を除くすべての行でマクロ **#** が展開されます。これは、が空白以外の最初の文字として含まれている行です。 条件付きコンパイルの一部としてスキップされないディレクティブの一部でマクロを展開します。 *条件付きコンパイルディレクティブ*を使用すると、ソースファイルの一部のコンパイルを抑制できます。 定数式または識別子をテストして、コンパイラに渡すテキストブロックと、プリプロセス中にソースファイルから削除するテキストブロックを決定します。

`#define` ディレクティブは、通常、有意な識別子を定数、キーワード、および一般的に使用されるステートメントや式に関連付けるために使用されます。 定数を表す識別子は、*シンボリック定数*または*マニフェスト定数*と呼ばれることもあります。 ステートメントまたは式を表す識別子は*マクロ*と呼ばれます。 このプリプロセッサのドキュメントでは、"マクロ" という用語のみ使用されます。

マクロの名前がプログラムのソーステキストで認識される場合、または特定の他のプリプロセッサコマンドの引数で認識される場合、マクロの呼び出しとして扱われます。 マクロ名はマクロ本体のコピーに置き換えられます。 マクロが引数を受け入れる場合、マクロの本体の仮パラメーターが、マクロ名とその後に続く実際の引数名に置き換えられます。 マクロ呼び出しを本文の処理済みのコピーに置き換えるプロセスは、マクロ呼び出しの*展開*と呼ばれます。

実際には、2 種類のマクロがあります。 *オブジェクトのような*マクロは引数を受け取りません。 *関数のような*マクロは、引数を受け取るように定義できます。これにより、関数呼び出しを表示して動作させることができます。 マクロは実際の関数呼び出しを生成しないため、関数呼び出しをマクロに置き換えることによってプログラムの実行速度を上げることができます。 (C++ では、多くの場合にインライン関数は適切なメソッドです)。ただし、マクロを定義して使用しないと、問題が発生する可能性があります。 引数のあるマクロ定義でかっこを使用して、式での適切な優先順位を維持することが必要な場合があります。 また、マクロが正しく副作用のある式を処理しない場合があります。 詳細については、 `getrandom` [#define ディレクティブ](../preprocessor/hash-define-directive-c-cpp.md)の例を参照してください。

マクロを定義した後は、最初に元の定義を削除しなくても、別の値に再定義することはできません。 ただし、まったく同じ定義のマクロを再定義することができます。 このため、同じ定義がプログラムに複数回出現する可能性があります。

ディレクティブ`#undef`は、マクロの定義を削除します。 定義を削除したら、マクロを別の値に再定義できます。 [#Define ディレクティブ](../preprocessor/hash-define-directive-c-cpp.md)と[#undef ディレクティブ](../preprocessor/hash-undef-directive-c-cpp.md)はそれぞれ、 `#define` `#undef`ディレクティブとディレクティブについて説明します。

詳細については、次のトピックを参照してください。

- [マクロと C++](../preprocessor/macros-and-cpp.md)

- [可変個引数マクロ](../preprocessor/variadic-macros.md)

- [定義済みマクロ](../preprocessor/predefined-macros.md)

## <a name="see-also"></a>関連項目

[C/C++プリプロセッサリファレンス](../preprocessor/c-cpp-preprocessor-reference.md)
