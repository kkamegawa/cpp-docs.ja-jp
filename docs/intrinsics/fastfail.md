---
title: __fastfail
ms.date: 09/02/2019
ms.assetid: 9cd32639-e395-4c75-9f3a-ac3ba7f49921
ms.openlocfilehash: 34198409c6a57eb494bfe819b367b71405a84e64
ms.sourcegitcommit: 6e1c1822e7bcf3d2ef23eb8fac6465f88743facf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/03/2019
ms.locfileid: "70222189"
---
# <a name="__fastfail"></a>__fastfail

**Microsoft 固有の仕様**

最小限のオーバーヘッドで呼び出し元プロセスを直ちに終了します。

## <a name="syntax"></a>構文

```C
void __fastfail(unsigned int code);
```

### <a name="parameters"></a>パラメーター

*コード*\
からプロセス終了の理由を示す、winnt.h または wdm からのシンボリック定数。`FAST_FAIL_<description>`

## <a name="return-value"></a>戻り値

`__fastfail` 組み込みには戻り値はありません。

## <a name="remarks"></a>Remarks

組み込み`__fastfail`は、*高速フェールオーバー*要求のメカニズムを提供します。これは、破損している可能性のあるプロセスが即時プロセス終了を要求するための手段です。 重大な障害によってプログラムの状態が破損し、回復できずにスタックしている場合は、通常の例外処理機能では処理できません。 `__fastfail` を使用して、最小限のオーバーヘッドでプロセスを終了します。

内部的には、`__fastfail` はアーキテクチャ固有のいくつかのメカニズムを使用して実装されています。

|アーキテクチャ|命令|コード引数の場所|
|------------------|-----------------|-------------------------------|
|x86|int 0x29|`ecx`|
|x64|int 0x29|`rcx`|
|ARM|Opcode 0xDEFB|`r0`|
|ARM64|オペコード0xF003|`x0`|

ファスト フェール要求は単体で使用でき、通常は、実行に必要な命令は 2 つのみとなります。 高速失敗要求が実行されると、カーネルは適切な操作を実行します。 ユーザー モードのコードでは、ファスト フェール イベントが発生したときの命令ポインター自体をまたぐメモリの依存関係はありません。 これにより、メモリの破損が深刻な場合でも、信頼性が最大限に向上します。

引数`code`は、winnt.h または`FAST_FAIL_<description>` wdm のシンボリック定数の1つであり、エラー条件の種類を示します。 これは、環境固有の方法でエラーレポートに組み込まれています。

ユーザーモードの高速失敗要求は、例外コード0xC0000409 で、少なくとも1つの例外パラメーターが指定された2番目の継続不可能な例外として表示されます。 最初の例外パラメーターは `code` 値です。 この例外コードは、プロセスが破損していること、およびエラーに応答して最小限のインプロセスアクションを実行する必要があることを、Windows エラー報告 (WER) およびデバッグインフラストラクチャに示しています。 カーネル モードのファスト フェール要求は、専用のバグチェック コード `KERNEL_SECURITY_CHECK_FAILURE` (0x139) を使用して実装されます。 どちらの場合も、プログラムが破損した状態にあると予想されるため、例外ハンドラーは呼び出されません。 デバッガーが存在する場合は、終了する前にプログラムの状態を確認する機会が与えられます。

Windows 8 から、ネイティブのファスト フェール メカニズムのサポートが開始されました。 高速フェールオーバー命令をネイティブでサポートしていない Windows オペレーティングシステムでは、通常、高速フェールオーバー要求がアクセス`UNEXPECTED_KERNEL_MODE_TRAP`違反として、またはバグチェックとして処理されます。 このような場合もやはりプログラムは終了しますが、必ずしも直ちに終了するわけではありません。

`__fastfail` は、組み込みとしてのみ使用できます。

## <a name="requirements"></a>必要条件

|組み込み|アーキテクチャ|
|---------------|------------------|
|`__fastfail`|x86、x64、ARM、ARM64|

**ヘッダーファイル**\<>

**Microsoft 固有の仕様はここまで**

## <a name="see-also"></a>関連項目

[コンパイラの組み込み](../intrinsics/compiler-intrinsics.md)
